 <div *ngIf="mensaje" class="alert alert-success text-center my-3">
      {{ mensaje }}
    </div>
<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üì¶ Gesti√≥n de Inventario</h2>
        <button class="btn btn-primary" (click)="nuevoProducto()">
            <i class="fa fa-plus"></i> + Nuevo Material
        </button>
    </div>

    <div class="card shadow">
        <div class="card-body p-0">
            <table class="table table-hover table-striped mb-0">
                <thead class="bg-light">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Descripci√≥n</th>
                        <th class="text-center">Stock</th>
                        <th>Unidad</th>
                        <th class="text-end">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="cargando">
                        <td colspan="6" class="text-center py-4">Cargando...</td>
                    </tr>
                    <tr *ngFor="let item of listaProductos">
                        <td>{{ item.id_producto }}</td>
                        <td class="fw-bold">{{ item.nombre }}</td>
                        <td class="text-muted small">{{ item.descripcion }}</td>
                        <td class="text-center">
                            <span class="badge" [ngClass]="item.stock_actual < 5 ? 'bg-danger' : 'bg-success'">
                                {{ item.stock_actual }}
                            </span>
                        </td>
                        <td>{{ item.unidad_medida }}</td>
                        <td class="text-end">
                            <button class="btn btn-sm btn-outline-primary me-2" (click)="editarProducto(item)">
                                ‚úèÔ∏è
                            </button>
                            <button class="btn btn-sm btn-outline-danger" (click)="eliminar(item.id_producto)">
                                üóëÔ∏è
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div *ngIf="mostrarModal" class="modal-overlay">
    <div class="card p-4 shadow-lg modal-content-centered">
        
        <h3 class="mb-4 text-center">
            {{ productoActual.id_producto ? 'Editar Material' : 'Nuevo Material' }}
        </h3>

        <form (ngSubmit)="guardar()">
            <div class="mb-3">
                <label class="form-label">Nombre del Material (*)</label>
                <input type="text" class="form-control" [(ngModel)]="productoActual.nombre" name="nombre" required>
            </div>
            
            <div class="mb-3">
                <label class="form-label">Descripci√≥n</label>
                <textarea class="form-control" rows="2" [(ngModel)]="productoActual.descripcion" name="descripcion"></textarea>
            </div>

            <div class="row">
                <div class="col-6 mb-3">
                    <label class="form-label">Stock Actual</label>
                    <input type="number" class="form-control" [(ngModel)]="productoActual.stock_actual" name="stock">
                </div>
                <div class="col-6 mb-3">
                    <label class="form-label">Unidad</label>
                    <select class="form-select" [(ngModel)]="productoActual.unidad_medida" name="unidad">
                        <option value="Unidades">Unidades</option>
                        <option value="Metros">Metros</option>
                        <option value="Cajas">Cajas</option>
                        <option value="Bobinas">Bobinas</option>
                    </select>
                </div>
            </div>

            <div class="mt-4 text-end">
                <button type="button" (click)="cerrarModal()" class="btn btn-danger me-2">Cancelar</button>
                <button type="submit" class="btn btn-success">
                    {{ productoActual.id_producto ? 'Actualizar' : 'Guardar' }}
                </button>
            </div>
        </form>

    </div>
</div>