<!-- Buscador de clientes -->
<div class="mb-3">
  <input
    class="form-control"
    placeholder="Buscar cliente (por nombre, apellido, DNI, localidad...)"
    [(ngModel)]="termino"
  >
  <button class="btn btn-primary mt-2" (click)="buscar()">Buscar</button>
</div>

<!-- Mensaje informativo -->
<div *ngIf="mensaje" class="alert alert-success text-center my-3">
  {{ mensaje }}
</div>

<!-- Tabla de clientes si hay resultados -->
<table class="table table-striped mt-3" *ngIf="clientes.length > 0">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>DNI</th>
      <th>Provincia</th>
      <th>Localidad</th>
      <th>Dirección</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let c of clientes">
      <ng-container *ngIf="editando === c.id_cliente; else verFila">
        <!-- Fila editable -->
        <td>
          <label for="nombre{{c.id_cliente}}" class="visually-hidden">Nombre</label>
          <input id="nombre{{c.id_cliente}}" [(ngModel)]="clienteEdit.nombre" class="form-control" />
        </td>
        <td>
          <label for="apellido{{c.id_cliente}}" class="visually-hidden">Apellido</label>
          <input id="apellido{{c.id_cliente}}" [(ngModel)]="clienteEdit.apellido" class="form-control" />
        </td>
         <td>
          <label for="dni{{c.id_cliente}}" class="visually-hidden">DNI</label>
          <input id="dni{{c.id_cliente}}" [(ngModel)]="clienteEdit.dni" class="form-control" />
        </td>
        <td>
          <label for="provincia{{c.id_cliente}}" class="visually-hidden">Provincia</label>
          <input id="provincia{{c.id_cliente}}" [(ngModel)]="clienteEdit.provincia" class="form-control" />
        </td>
        <td>
          <label for="localidad{{c.id_cliente}}" class="visually-hidden">Localidad</label>
          <input id="localidad{{c.id_cliente}}" [(ngModel)]="clienteEdit.localidad" class="form-control" />
        </td>
        <td>
          <label for="direccion{{c.id_cliente}}" class="visually-hidden">Dirección</label>
          <input id="direccion{{c.id_cliente}}" [(ngModel)]="clienteEdit.direccion" class="form-control" />
        </td>
        <td>
          <button class="btn btn-success btn-sm me-2" (click)="guardar()">Guardar</button>
          <button class="btn btn-danger btn-sm" (click)="cancelarEdicion()">Cancelar</button>
        </td>
      </ng-container>
      <ng-template #verFila>
        <!-- Fila normal -->
        <td>{{ c.nombre }}</td>
        <td>{{ c.apellido }}</td>
        <td>{{ c.dni }}</td>
        <td>{{ c.provincia }}</td>
        <td>{{ c.localidad }}</td>
        <td>{{ c.direccion }}</td>
        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="editar(c)">Editar</button>
          <button class="btn btn-danger btn-sm" (click)="eliminar(c.id_cliente)">Eliminar</button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>

<!-- Mensaje si la lista está vacía -->
<div *ngIf="clientes.length === 0 && mensaje === ''" class="alert alert-info text-center">
  No hay clientes para mostrar.
</div>
